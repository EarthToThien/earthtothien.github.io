<!DOCTYPE html>
<html lang="en">
<head style="font-family: sans-serif">
    <title>Tiltify Integration Extension</title>
    <meta name="Description" content="Streamer.Bot Tiltify Integration Extension">
    <meta name="keywords" content="Streamer.Bot, Tiltify, extension, charity, alerts, overlay, chatbot">
    <meta name="author" content="EarthToThien">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image:url" content="/assets/header/SocialBanner.webp">
    <meta property="og:url" content="https://earthtothien.github.io/tiltify-integration.html">
    <meta property="og:title" content="Thien's Streamer Corner">
    <meta property="og:description" content="A place for me to share all my widgets for Streamer.Bot and OBS!">
    <link rel="stylesheet" href="/assets/css/style.css"/>
    <link rel="stylesheet" href="/assets/css/prism.css"/>
    <script src="/assets/js/scroll-top.js" async></script>
    <script src="https://kit.fontawesome.com/6c17de7f6c.js" crossorigin="anonymous" async></script>
</head>

<header id="Header">
    <link rel="preload" as="image" href="/assets/header/BackgroundBanner.webp">    
    <h1 style="font-size: 4.25rem;">Tiltify Integration Extension</h1>
</header>

<div class="body-content">
<div>
<p><a href="index.html" class="text-hover">Home</a> &gt; Tiltify Integration</p>
</div>

<div>
<h2 id="Table_of_Contents">Table of Contents</h2>
<ul class="ul-toc">
    <li><a href="#Video" class="text-hover">Video</a></li>
    <li><a href="#Introduction" class="text-hover">Introduction</a></li>
    <li><a href="#Requirements" class="text-hover">Requirements</a></li>
    <li><a href="#Download_Code" class="text-hover">Download Code</a></li>
    <li><a href="#Configuration" class="text-hover">Configuration</a></li>
    <ul class="ul-indent">
        <li><a href="#Custom_Trigger" class="text-hover">Custom Trigger - Get Donation</a></li>
        <li><a href="#Get_Access_Token" class="text-hover">Get Access Token</a></li>
        <li><a href="#List_Donations" class="text-hover">List Donations</a></li>
    </ul>
    <li><a href="#Alerts" class="text-hover">Alerts</a></li>
    <li><a href="#Total_Raised" class="text-hover">Total Raised</a></li>
    </ul>
    <li><a href="#Changelog" class="text-hover">Changelog</a></li>    
</ul>
</div>

<section>
<h2 id="Video">Video</h2>
<div class="video-container"><iframe class="responsive-iframe" src="https://www.youtube.com/embed/CWug3SO2sJs?si=I1BnmC5UzdcLrD9S" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div>
</section>

<section>
<h2 id="Introduction">Introduction</h2>
<p>This is a detailed overview of the Tiltify Integration Extension for Streamer.Bot. The purpose of this extension is to serve as a foundation for streamers to connect their Streamer.Bot client to Tiltify and to have their own custom actions be triggered by donations to their Tiltify charity campaign.</p>
</section>

<section>
<h2 id="Requirements">Requirements</h2>
<ul style="padding-left: 1rem;">
    <li><strong>Tiltify Account</strong> - User will need a Tiltify account in order to gain the necessary access to Tiltify.</li>
    <li><strong>Tiltify Campaign</strong> - User must have an active Tiltify campaign in order for the extension to work properly.</li>
</ul>
</section>

<section>
<h2 id="Download_Code">Download Code</h2>
<button onclick="window.open('https://ko-fi.com/s/7d7437c1c9')" type="button" class="download-button">
    <p><strong>Tiltify Integration for Streamer.Bot</strong></p>
    <p><i class="fa-solid fa-mug-hot fa-lg" style="padding-right: 0.5rem;"></i>EarthToThien's Ko-fi Shop</p>
</button>
</section>

<section>
<h2 id="Installation">Installation</h2>
<p>In the Streamer.Bot client, select the Import option in the top menu. Drag the downloaded Download Code file into the Import String field. If done correctly, the Import Actions window should match the following image (Figure 1).</p>

<figure>
    <img src="images/Tiltify Integration/01 Import Window.webp" alt="Streamer.Bot Import Window" style="max-width: 64%; height: auto;">
    <figcaption><strong>Figure 1</strong>: Streamer.Bot import window</figcaption>
</figure>

<p>After importing the extension, the following items should appear in the Streamer.Bot client under the corresponding tabs:</p>
<ul>
    <li><strong>Actions Tab</strong></li>    
    <ul>
        <li>Tiltify - Generic Alert</li>
        <li>Tiltify - Get Access Token</li>
        <li>Tiltify - List Donations</li>
        <li>Tiltify - Total Raised</li>
    </ul>
    <li><strong>Queues Tab</strong></li>
    <ul>
        <li>Tiltify - Access Token</li>
        <li>Tiltify</li>
    </ul>
    <li><strong>Timed Actions Tab</strong></li>
    <ul>
        <li>Tiltify - List Donations</li>
    </ul>
</ul>
<p><span class="text-yellow">Access Token</span> and <span class="text-yellow">List Donations</span> are the main actions for the extension. <span class="text-yellow">Generic Alert</span> is an example alert action that can be used as a simple alert or an alert action template. <span class="text-yellow">Total Raised</span> is an optional action if the user wants to display the current amount raised and the current goal for the Tiltify campaign. Under the Timed Actions Tab (Settings > Timed Actions), the <span class="text-blue">Tiltify - List Donations</span> timer is disabled. Once configuration is complete and all alert actions are linked to the extension, the timer needs to be enabled to begin polling Tiltify.</p>
</section>

<section>
<h2 id="Configuration">Configuration</h2>
<h3 id="Custom_Trigger">Custom Trigger - Get Donation</h3>
<p>After importing the Download Code file, the Streamer.Bot client needs to be closed and re-opened in order to register the custom trigger <span class="text-blue">Get Donation</span> for the extension. After re-opening the client, select an action such as <span class="text-yellow">Generic Alert</span>, and right click in the Triggers window to navigate through the following menu path: Custom &gt; Tiltify &gt; Get Donation (Figure 2).</p>

<figure>
    <img src="images/Tiltify Integration/12 Custom Trigger.webp" alt="Streamer.Bot Triggers menu and custom triggers navigation">
    <figcaption><strong>Figure 2</strong>: Where to find the custom trigger <span class="text-blue">Get Donation</span> in the Streamer.Bot Triggers menu.</figcaption>
</figure>

<h3 id="Get_Access_Token">Get Access Token</h3>
<p>In order to acquire a <span class="text-red">Client ID</span> and <span class="text-red">Client Secret</span> for the <span class="text-yellow">Get Access Token</span> action, a Tiltify account is required. From the Tiltify dashboard, access the Developer Hub and create an application. The Redirect URI field needs to be populated in order to create an application, but it is not required for the extension function. For this, <code class="code-red">http://localhost</code> is used as shown in Figure 3.</p>

<figure>
    <img src="images/Tiltify Integration/02 Tiltify Create App.webp" alt="Tiltify Create App page" style="max-width: 64%; height: auto;">
    <figcaption><strong>Figure 3</strong>: Tiltify Create Application window, located under the Developer hub</figcaption>
</figure>

<p>After creating an app, a notification will appear indicating that the app was made successfully. Further down the page, there is a blurred section called “Application keys” that will provide the <span class="text-red">Client ID</span> and <span class="text-red">Client Secret</span> that are required for the extension to generate an <span class="text-red">Access Token</span> (<code class="code-red">accessToken_Tiltify</code>) for Tiltify access. The corresponding sub-actions under the <span class="text-yellow">Get Access Token</span> action are then populated with the acquired information (Figure 4).</p>

<figure>
    <img src="images/Tiltify Integration/03 App Keys.webp" alt="Tiltify Application keys needed for the Streamer.Bot Tiltify extension.">
    <figcaption><strong>Figure 4</strong>: The Tiltify Application keys are required for the Streamer.Bot client to generate an access token to poll Tiltify.</figcaption>
</figure>

<p>The extension also requires the user to have an active or published Tiltify charity campaign. From the Tiltify campaign dashboard, the public ID can be found under Information tab of Setup (Figure 5).</p>

<p style="text-align: center;">
    <img src="images/Tiltify Integration/04 Campaign ID.webp" alt="Tiltify Campaign ID needed for Streamer.Bot Tiltify extension.">
    <figcaption><strong>Figure 5</strong>: The public ID is required to link the Tiltify campaign to the Streamer.Bot extension. This allows data to be obtained from the active campaign.</figcaption>
</p>

<h3 id="List_Donations">List Donations</h3>
<p>The <span class="text-yellow">List Donations</span> action serves as the trigger source for all donation alerts. There is a repeating timer called <span class="text-blue">Tiltify - List Donations</span> that serves as the trigger for the <span class="text-yellow">List Donations</span> action. With each trigger, the <span class="text-yellow">List Donations</span> action polls Tiltify for the latest donation data from the current connected Tiltify campaign. This timer can be adjusted in the Streamer.Bot client under Settings > Timed Actions and is defaulted at 2 second intervals.</p>

<p><strong>Note</strong>: After completing configuration of the extension, it is recommended to set the <span class="text-yellow">List Donations</span> action to "Exclude from History", which can be done by right clicking on the action and checking the option. This will reduce load on the Streamer.Bot client. When troubleshooting, disable "Exclude from History".</p>

<p>Under the <span class="text-yellow">List Donations</span> action, the <strong>Execute Code (Tiltify Donor Data)</strong> sub-action polls data from Tiltify and generates arguments using data from the most recent donation in the Tiltify charity campaign (see Table 1). These arguments are passed through the <span class="text-blue">Get Donation</span> trigger that is used by the alert actions. With each polling, <code class="code-red">donationIdList_Tiltify</code>, which lists the <code class="code-red">donationId</code> of the last five donations, is checked to see if it contains the <code class="code-red">donationId</code> of the most recent Tiltify donation data. If the list does not contain it, <code class="code-red">donationIdList_Tiltify</code> is updated to add the new donationId and remove the oldest donationId from the list. The other arguments are then generated, and the set alert actions are triggered.</p>

<table class="center">
    <caption><strong>Table 1</strong>: All arguments generated by the <span class="text-yellow">List Donations</span> action.</caption>
    <tr>
        <th><strong>Argument</strong></th>
        <th><strong>Description</strong></th>
    </tr>
    <tr>
        <td><code class="code-red">donationId</code></td>
        <td>Unique identifier assigned to each donation to the Tiltify campaign. This argument is used by the extension to determine whether or not there is a new donation to the Tiltify campaign. The last five <code class="code-red">donationId</code> are saved and used as reference for new donations.</td>
    </tr>
    <tr>
        <td><code class="code-red">donationDate</code></td>
        <td>Date and time (UTC) of when donation occurs.</td>
    </tr>
    <tr>
        <td><code class="code-red">donorName</code></td>
        <td>Name provided with the donation to the Tiltify campaign.</td>
    </tr>
    <tr>
        <td><code class="code-red">donorAmount</code></td>
        <td>Donation amount (USD) made to the Tiltify campaign.</td>
    </tr>
    <tr>
        <td><code class="code-red">donorComment</code></td>
        <td>Message that donor included with the donation to the Tiltify campaign.</td>
    </tr>
    <tr>
        <td><code class="code-red">donorRewards</code></td>
        <td>List of reward IDs of the rewards claimed with each donation to the Tiltify campaign. Each reward created for the Tiltify campaign is assigned a unique ID and appears in the data when claimed with each donation.</td>
    </tr>
</table>

<p>When creating alert actions, set <span class="text-blue">Get Donation</span>, found under custom triggers, as the trigger for the action. This will link the user-created alert action to the <span class="text-yellow">List Donations</span> action. Once alert actions are properly linked, the <span class="text-blue">Tiltify - List Donations</span> timer located under Settings &gt; Timed Actions needs to be enabled in order to begin polling Tiltify (Figure 6).</p>

<figure>
    <img src="images/Tiltify Integration/05 Timer.webp" alt="Timed Actions window in Streamer.Bot showing the Timed Action settings for the List Donations action.">
    <figcaption><strong>Figure 6</strong>: Timed Actions settings for the <span class="text-yellow">List Donations</span> action.</figcaption>
</figure>
</section>

<section>
<h3 id="Alerts">Alerts</h3>
<p>Alert actions are triggered by the custom trigger <span class="text-blue">Get Donation</span>. When triggered, alert actions will have access to all the arguments generated by the <span class="text-yellow">List Donations</span> action (see Table 1 in <a class="text-hover" href="#List_Donations">List Donations</a> section). The <span class="text-yellow">Generic Alert</span> action is a simple example of how these arguments may be used (Figure 7). For the <strong>Send Message to Twitch Channel</strong> sub-action, the arguments <code class="code-red">donorName</code> and <code class="code-red">donorAmount</code> are used in a message to be sent to the Twitch chat (Figure 8).</p>

<figure>
    <img src="images/Tiltify Integration/10 Generic Alert.webp" alt="Sub-action list for Generic Alert action.with the Send Message to Twitch Channel sub-action using the donorName and donorAmount arguments." class="img-full"></img>
    <figcaption><strong>Figure 7</strong>: Sub-Action list for <span class="text-yellow">Generic Alert</span> action is a simple <strong>Send Message to Twitch Channel</strong> sub-action using the <code class="code-red">donorName</code> and <code class="code-red">donorAmount</code> arguments.</figcaption>
</figure>

<figure>
    <img src="images/Tiltify Integration/11 Send Message.webp" alt="Send Message to Twitch action using the donorName and donorAmount argument to send charity message." class="img-full"></img>
    <figcaption><strong>Figure 8</strong>: <strong>Send Message to Twitch Channel</strong> sub-action in the <span class="text-yellow">Generic Alert</span> action. This sub-action is used to send a charity message into chat after every new donation.</figcaption>
</figure>
</section>

<section>
<h3 id="Total_Raised">Total Raised</h3>
<p><span class="text-yellow">Total Raised</span> action is an optional feature that generates the following arguments listed in the following table. These arguments can be used to display the current progress of the Tiltify charity campaign. This action can be run by setting it as the last sub-action for each alert action (see example in Figure 7) or by setting a command or timer as the trigger.</p>

<table class="center">
    <caption><strong>Table 3</strong>: All arguments generated by the <span class="text-yellow">Total Raised</span> action.</caption>
    <tr>
        <th><strong>Argument</strong></th>
        <th><strong>Description</strong></th>
    </tr>
    <tr>
        <td><code class="code-red">currentTotal</code></td>
        <td>The current amount raised for the Tiltify charity campaign.</td>
    </tr>
    <tr>
        <td><code class="code-red">currentGoal</code></td>
        <td>The current goal set for the Tiltify charity campaign.</td>
    </tr>
</table>
</section>

<section>
<h2 id="Changelog">Changelog</h2>
<h3>Version 3.0</h3>
<ul style="padding-left: 1rem;">
    <li>List Donations Methods section removed from guide. Custom Trigger will replace requirement to modify <span class="text-yellow">List Donations</span> action to link alert actions.</li>
    <li><span class="text-yellow">List Donations</span> action updated. Added function to generate custom trigger <span class="text-blue">Get Donation</span>. After importing the extension, this trigger will be available after user restarts the Streamer.Bot client. All alert actions will now use this custom trigger.</li>
    <li><span class="text-yellow">List Donations</span> action updated. Action now generates JSON string of arguments for custom trigger <span class="text-blue">Get Donation</span>.</li>
</ul>
<h3>Version 2.1</h3>
<ul style="padding-left: 1rem;">
    <li><span class="text-yellow">List Donations</span> action updated. <code class="code-red">donorAmount</code> argument updated to function constistently across all cultures. Added <span class="text-purple">CultureInfo.InvariantCulture</span> call to the <span class="text-purple">Convert.ToDecimal()</span> for <code class="code-red">donorAmount</code>.</li>
    <li><span class="text-yellow">Total Raised</span> action updated. <code class="code-red">currentTotal</code> and <code class="code-red">currentGoal</code> arguments updated to function constistently across all cultures. Added <span class="text-purple">CultureInfo.InvariantCulture</span> call to the <span class="text-purple">Convert.ToDecimal()</span> for <code class="code-red">currentTotal</code> and <code class="code-red">currentGoal</code>.</li>
</ul>
</section>

<button class="scroll-to-top"><i class="fa-solid fa-chevron-up" style="font-size: 2rem; text-align: center;"></i></button>

</div>

<footer>
    <div class="foot-column">
        <div class="foot-header">Socials</div>
        <ul class="foot-ul">
            <li><a href="https://bsky.app/profile/earthtothien.github.io"><i class="fa-brands fa-bluesky"></i><span class="text-hover" style="padding-left: 0.5rem;">Bluesky</span></a></li>
            <li><a href="https://www.threads.net/@earthtothien"><i class="fa-brands fa-threads"></i><span class="text-hover" style="padding-left: 0.5rem;">Threads</span></a></li>
            <li><a href="https://www.instagram.com/earthtothien/"><i class="fa-brands fa-instagram"></i><span class="text-hover" style="padding-left: 0.5rem;">Instagram</span></a></li>
        </ul>
    </div>
    <div class="foot-column">
        <div class="foot-header">Support</div>
        <ul class="foot-ul">
            <li><a href="https://www.twitch.tv/EarthToThien"><i class="fa-brands fa-twitch"></i><span class="text-hover" style="padding-left: 0.5rem;">Twitch</span></a></li>
            <li><a href="https://www.youtube.com/@EarthToThien"><i class="fa-brands fa-youtube"></i><span class="text-hover" style="padding-left: 0.5rem;">YouTube</span></a></li>
            <li><a href="https://ko-fi.com/earthtothien"><i class="fa-solid fa-mug-hot"></i><span class="text-hover" style="padding-left: 0.5rem;">Ko-fi</span></a></li>
        </ul>
    </div>
    <div class="foot-column">
        <div class="foot-header">Contact</div>
        <ul class="foot-ul">
            <li><a href="mailto:EarthToThienCo@gmail.com"><i class="fa-regular fa-envelope"></i><span class="text-hover" style="padding-left: 0.5rem;">EarthToThienCo@gmail.com</span></a></li>
        </ul>
    </div>
</footer>

</html>